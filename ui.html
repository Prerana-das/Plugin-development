<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/thomas-lowry/figma-plugin-ds/dist/figma-plugin-ds.css">
<style>
 input{
   display: block;
   padding: 15px;
   margin-top: 15px;
 }
 body{
   padding: 2em;
 }
 div{
   margin: 1em;
 }
</style>

<h2>Custom plugin heading</h2>
<div>
  <label for="username">Username</label>
  <input class="input__field" type="text" value="Username" id="username">
  <label for="name">Name</label>
  <input class="input__field" type="text" value="Name" id="name">
  <label for="description">Description</label>
  <input type="textarea" row="5" value="Description" id="description">
  <div class="switch">
      <input class="switch__toggle" type="checkbox" id="dark-mode-on">
      <label class="switch__label" for="dark-mode-on">Dark mode</label>
  </div>
  <div class="radio">
    <input id="radioButton1" type="radio" class="radio__button"  name="varientGroup" value="1">
    <label for="radioButton1" class="radio__label">no img</label>

    <input id="radioButton2" type="radio" class="radio__button"  name="varientGroup" value="2">
    <label for="radioButton2" class="radio__label">single</label>

    <input id="radioButton3" type="radio" class="radio__button"  name="varientGroup" value="3">
    <label for="radioButton3" class="radio__label">carousel</label>
  </div>
  <button class="button button--primary" id="submit-post">Submit</button>
</div>

<script>
  document.getElementById("submit-post").onclick=()=>{
    console.log("calling func");
    const username=document.getElementById("username").value;
    const name=document.getElementById("name").value;
    const description=document.getElementById("description").value;

    const darkModeState =document.getElementById("dark-mode-on").checked;
    const imageVariant= document.querySelector("input[name='varientGroup']:checked").value;

    parent.postMessage({pluginMessage:{name,username,description,darkModeState,imageVariant}},'*');
  }


//   window.onmessage = async (event) => {
//   if (event.data.pluginMessage.type === 'networkRequest') {
//     var request = new XMLHttpRequest()
//     // This link has random lorem ipsum text
//     request.open('GET', 'http://localhost:3333')
//     request.responseType = 'text'
//     request.onload = () => {


//       console.log("my res");
//       window.parent.postMessage({pluginMessage: request.response}, '*')
//     };
//     request.send()
//   }
// }
</script>

